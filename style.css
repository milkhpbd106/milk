// script.js – Quản lý logic trình tự video, lời chúc, nhạc nền và mở quà

const music = new Audio('you-vietra.mp3');
let firstVideo = document.getElementById('firstVideo');
let secondVideo = document.getElementById('secondVideo');
let messageBox = document.getElementById('messageBox');
let giftBox = document.getElementById('giftBox');
let giftImage = document.getElementById('giftImage');
let openGiftButton = document.getElementById('openGiftButton');

function delay(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}

async function startSequence() {
  music.loop = true;
  music.play();
  firstVideo.play();

  // Hiện 3 lời chúc đầu tiên
  messageBox.innerHTML = `
    <div class="message fade-in-out">
      <p>Chúc mừng sinh nhật cậu</p>
      <p>Cảm ơn vì đã luôn là ánh sáng dịu dàng trong thế giới của tớ</p>
      <p>Hãy nhấn vào đây để mở món quà nhỏ xíu tớ dành riêng cho cậu</p>
    </div>`;

  await delay(10000); // 7s hiển thị + 3s fade out

  // Ẩn video đầu, hiện video dreamy tiếp theo
  firstVideo.style.display = 'none';
  secondVideo.style.display = 'block';
  secondVideo.play();

  // Hiện 2 câu chúc tiếp theo
  messageBox.innerHTML = `
    <div class="message fade-in-out">
      <p>🌸 Happy Birthday Milk 💖</p>
      <p>Let’s step into a dreamy world together</p>
    </div>`;

  await delay(6000); // 3s hiển thị + 3s fade out

  // Hiện nút mở quà
  openGiftButton.style.display = 'block';
}

openGiftButton.addEventListener('click', () => {
  if (giftImage.style.display === 'block') {
    giftImage.style.display = 'none';
  } else {
    giftImage.style.display = 'block';
  }
});

window.addEventListener('load', startSequence);
